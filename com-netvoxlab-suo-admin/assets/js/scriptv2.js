var SuoAdminModule = {};

SuoAdminModule.host = "http://sqtest.egspace.ru/";
SuoAdminModule.orgs = [
    {
      "recId": "fb4724b9-eb95-4229-b101-195966902ee1",
      "id": "fb4724b9-eb95-4229-b101-195966902ee1",
      "name": "Многофункциональный центр предоставления государственных и муниципальных услуг город Владимир МФЦ Владимира",
      "attributes": {},
      "shortName": "МФЦ г. Владимир (Октябрьский пр-т)",
      "groupName": "Владимир",
      "address": "г. Владимир, Октябрьский пр-т, д.47",
      "isEnabled": true,
      "contactInfo": "Телефон: (4922)53-66-47, сайт http://www.mfcvladimir.ru",
      "engineId": "7975131d-dc70-467e-a0b9-673b893e5432",
      "endPoint": "",
      "city": {
        "recId": "d26360df-8f4c-4c75-8a8b-b890d9744cd5",
        "name": "Владимир",
        "childs": null
      },
      "placeTypeId": "866dc938-1d0e-44f3-8709-dd5cd0bd6901",
      "placeEmail": "vladokt@mfc.ru",
      "placeSubEmail": "vladokt@mfc.ru",
      "headPerson": "",
      "site": "http://www.mfcvladimir.ru",
      "phones": "(4922)53-66-47",
      "fiasId": null,
      "regionId": "59edbd09-d885-4584-a2f2-2d0dfb53839f"
    },
    {
      "recId": "b8c71f08-e713-4529-b9d2-e3769e200370",
      "id": "b8c71f08-e713-4529-b9d2-e3769e200370",
      "name": "Государственное бюджетное учреждение Владимирской области «Многофункциональный центр предоставления государственных и муниципальных услуг Владимирской области»",
      "attributes": {},
      "shortName": "МФЦ Гусь-Хрустальный",
      "groupName": "Владимирская область",
      "address": "601501, Владимирская область, г. Гусь-Хрустальный, ул. Владимирская, д. 1",
      "isEnabled": true,
      "contactInfo": "Телефон: 8(49241)2-05-96, Email:gus.mfc@yandex.ru, сайт: http://www.umfc.avo.ru/index.htm",
      "engineId": "7975131d-dc70-467e-a0b9-673b893e5432",
      "endPoint": "",
      "city": {
        "recId": "d26360df-8f4c-4c75-8a8b-b890d9744cd5",
        "name": "Владимир",
        "childs": null
      },
      "placeTypeId": "866dc938-1d0e-44f3-8709-dd5cd0bd6901",
      "placeEmail": "gus.mfc@yandex.ru",
      "placeSubEmail": "gus@mfc.ru",
      "headPerson": "",
      "site": "http://www.umfc.avo.ru/index.htm",
      "phones": "8(49241)2-05-96",
      "fiasId": null,
      "regionId": "59edbd09-d885-4584-a2f2-2d0dfb53839f"
    },
    {
      "recId": "d1c9ed97-995c-41f8-95fc-0db84171c20c",
      "id": "d1c9ed97-995c-41f8-95fc-0db84171c20c",
      "name": "МАУ МФЦ Алексеевского района\r\n",
      "attributes": {},
      "shortName": "МАУ МФЦ Алексеевского района\r\n",
      "groupName": "г. Алексеевка, ул. Победы, д. 67",
      "address": "г. Алексеевка, ул. Победы, д. 67\r\n",
      "isEnabled": true,
      "contactInfo": "",
      "engineId": "7975131d-dc70-467e-a0b9-673b893e5432",
      "endPoint": "",
      "city": {
        "recId": "384a7b3a-17ad-4c1b-a4d0-cad2b1c6518c",
        "name": "Белгород",
        "childs": null
      },
      "placeTypeId": "866dc938-1d0e-44f3-8709-dd5cd0bd6901",
      "placeEmail": "",
      "placeSubEmail": "",
      "headPerson": "",
      "site": "",
      "phones": "",
      "fiasId": null,
      "regionId": "55e8da0b-afbf-4110-a1a8-bf06e7dde2d4"
    },
    {
      "recId": "115d4c50-fecd-4a7b-8159-1ba2d359f267",
      "id": "115d4c50-fecd-4a7b-8159-1ba2d359f267",
      "name": "ГАУ БО МФЦ\r\n",
      "attributes": {},
      "shortName": "ГАУ БО МФЦ\r\n",
      "groupName": "г. Белгород",
      "address": "г. Белгрод, пр-т Славы, д. 25\r\n",
      "isEnabled": true,
      "contactInfo": "",
      "engineId": "7975131d-dc70-467e-a0b9-673b893e5432",
      "endPoint": "",
      "city": {
        "recId": "384a7b3a-17ad-4c1b-a4d0-cad2b1c6518c",
        "name": "Белгород",
        "childs": null
      },
      "placeTypeId": "866dc938-1d0e-44f3-8709-dd5cd0bd6901",
      "placeEmail": "",
      "placeSubEmail": "",
      "headPerson": "",
      "site": "",
      "phones": "",
      "fiasId": null,
      "regionId": "55e8da0b-afbf-4110-a1a8-bf06e7dde2d4"
    },
    {
      "recId": "92e62c6d-e1d9-4133-90c0-4ca0b50afec9",
      "id": "92e62c6d-e1d9-4133-90c0-4ca0b50afec9",
      "name": "МАУ МФЦ Белгородского района»\r\n",
      "attributes": {},
      "shortName": "МАУ МФЦ Белгородского района»\r\n",
      "groupName": "пгт. Разумное, ул. Скворцова, д. 6",
      "address": "пгт. Разумное, ул. Скворцова, д. 6\r\n",
      "isEnabled": true,
      "contactInfo": "",
      "engineId": "7975131d-dc70-467e-a0b9-673b893e5432",
      "endPoint": "",
      "city": {
        "recId": "384a7b3a-17ad-4c1b-a4d0-cad2b1c6518c",
        "name": "Белгород",
        "childs": null
      },
      "placeTypeId": "866dc938-1d0e-44f3-8709-dd5cd0bd6901",
      "placeEmail": "",
      "placeSubEmail": "",
      "headPerson": "",
      "site": "",
      "phones": "",
      "fiasId": null,
      "regionId": "55e8da0b-afbf-4110-a1a8-bf06e7dde2d4"
    }
  ];

SuoAdminModule.currentPlace = {};
SuoAdminModule.userToken = "";

SuoAdminModule.myPlaces = function() {
  console.log("--> myPlaces()");

  var content = '<h1>Администрирование и настройка</h1><h2>Мои организации</h2><table cellspacing="0" cellpadding="0"><tbody><tr><td>МФЦ г.Владимир (Октябрьский пр-т)</td><td><div class="dropdown"><i class="fa fa-ellipsis-v dropbtn" aria-hidden="true"></i><div class="dropdown-content"><a href="#">Изменить</a><a href="#">Расписание</a><a href="#">Удалить</a></div></div></td></tr><tr><td class="nvx-suo-draft">МФЦ г.Хрустальный (черновик)</td><td><div class="dropdown"><i class="fa fa-ellipsis-v dropbtn" aria-hidden="true"></i><div class="dropdown-content"><a href="#">Изменить</a><a href="#">Расписание</a><a href="#">Удалить</a></div></div></td></tr><tr><td class="nvx-suo-draft">МАУ МФЦ Алексеевского района (черновик)</td><td><div class="dropdown"><i class="fa fa-ellipsis-v dropbtn" aria-hidden="true"></i><div class="dropdown-content"><a href="#">Изменить</a><a href="#">Расписание</a><a href="#">Удалить</a></div></div></td></tr></tbody></table><div class="nvx-suo-actions"><a class="nvx-suo-button" id="create-place"><i class="fa fa-plus-circle" aria-hidden="true"></i>Добавить</a><a class="nvx-suo-admin-link" id="edit-template">Редактировать шаблон</a><a class="nvx-suo-admin-link" id="edit-day">Редактировать день</a><a class="nvx-suo-admin-link" id="place-settings">Настройки организации</a><a class="nvx-suo-admin-link" id="my-schedules">Мои расписания</a><a class="nvx-suo-admin-link" id="my-templates">Мои шаблоны</a></div><br><p>HTML-код для вставки виджета:</p><textarea><div class="nvx-mfc-suo-widget"></div><script type="text/javascript">SuoSettings = {};SuoSettings.host = "http://sqtest.egspace.ru/";SuoSettings.portal_id = "5e07086e-7326-43d4-8c70-1631b4b4af82";SuoSettings.region_id = "1cc12792-fb12-41f4-b9c5-363087a7dc6d";</script><script type="text/javascript" src="http://widgets.mfc.ru/nvx-suo-widget/widget.js"></script></textarea>';

  $(".nvx-suo-admin").html(content);

  $("#create-place").click(SuoAdminModule.createPlace);
  $("#edit-template").click(SuoAdminModule.editTemplate);
  $("#edit-day").click(SuoAdminModule.editDay);
  $("#place-settings").click(SuoAdminModule.placeSettings);
  $("#my-schedules").click(SuoAdminModule.mySchedules);
  $("#my-templates").click(SuoAdminModule.myTemplates);
  //TODO other elements
};

SuoAdminModule.createPlace = function() {
  console.log("--> createPlace()");

  var content = '<h1>Администрирование и настройка</h1><h2>Добавление (изменение) организации</h2><label>Полное название организации</label><input type="text" name="" value="МФЦ г.Владимир"><label>Краткое название организации</label><input type="text" name="" value="МФЦ Владимир"><label>Адрес</label><input type="text" name="" value="Октябрьский пр-т"><label>Email</label><input type="text" name="" value="info@mfc.ru"><label>Телефон</label><input type="text" name="" value="8 (1234) 56789"><label><input type="checkbox" name="">Черновик <span>(В режиме черновика организация недоступна для выбора пользователям)</span></label><div class="nvx-suo-actions"><a class="nvx-suo-button" id="save-place"><i class="fa fa-check" aria-hidden="true"></i>Сохранить</a><a class="nvx-suo-button-minor" id="cancel-place"><i class="fa fa-ban" aria-hidden="true"></i>Отмена</a><div class="nvx-suo-admin-additional"><a class="nvx-suo-admin-link" id="place-settings"><i class="fa fa-cog" aria-hidden="true"></i>Дополнительно</a><a class="nvx-suo-admin-link" id="my-templates"><i class="fa fa-calendar" aria-hidden="true"></i>Расписание</a><a class="nvx-suo-admin-link" id="my-places">Назад к списку организаций</a></div></div>';

  $(".nvx-suo-admin").html(content);
  $("#place-settings").click(SuoAdminModule.placeSettings);
  $("#my-templates").click(SuoAdminModule.myTemplates);
  $("#cancel-place").click(SuoAdminModule.myPlaces);
  $("#save-place").click(SuoAdminModule.myPlaces);
  $("#my-places").click(SuoAdminModule.myPlaces);
  //TODO other elements

};

SuoAdminModule.editTemplate = function() {
  console.log("--> editTemplate()");

  var content = '<h1>Администрирование и настройка</h1><h2>Изменение шаблона расписания организации</h2><p>Название шаблона:<span>*</span><input type="text" placeholder="Введите название шаблона" /></p><p>Продолжительность приема одного посетителя (в мин.):<span>*</span><input type="number" value="15" required></p><div class="nvx-suo-templates"><table cellpadding="0" cellspacing="0"><tr><td>ПН</td><td><select><option selected="true">Рабочий день (с 9 до 18 с перерывом на обед)</option><option>Сокращенный рабочий день (с 9 до 12 без обеда)</option><option>Выходной день</option></select></td><td><i class="fa fa-plus" aria-hidden="true"></i></td></tr><tr><td>ВТ</td><td><select><option selected="true">Рабочий день (с 9 до 18 с перерывом на обед)</option><option>Сокращенный рабочий день (с 9 до 12 без обеда)</option><option>Выходной день</option></select></td><td><i class="fa fa-plus" aria-hidden="true"></i></td></tr><tr><td>СР</td><td><select><option selected="true">Рабочий день (с 9 до 18 с перерывом на обед)</option><option>Сокращенный рабочий день (с 9 до 12 без обеда)</option><option>Выходной день</option></select></td><td><i class="fa fa-plus" aria-hidden="true"></i></td></tr><tr><td>ЧТ</td><td><select><option selected="true">Рабочий день (с 9 до 18 с перерывом на обед)</option><option>Сокращенный рабочий день (с 9 до 12 без обеда)</option><option>Выходной день</option></select></td><td><i class="fa fa-plus" aria-hidden="true"></i></td></tr><tr><td>ПТ</td><td><select><option>Рабочий день (с 9 до 18 с перерывом на обед)</option><option selected="true">Сокращенный рабочий день (с 9 до 12 без обеда)</option><option>Выходной день</option></select></td><td><i class="fa fa-plus" aria-hidden="true"></i></td></tr><tr><td>СБ</td><td><select><option>Рабочий день (с 9 до 18 с перерывом на обед)</option><option>Сокращенный рабочий день (с 9 до 12 без обеда)</option><option selected="true">Выходной день</option></select></td><td><i class="fa fa-plus" aria-hidden="true"></i></td></tr><tr><td>ВС</td><td><select><option>Рабочий день (с 9 до 18 с перерывом на обед)</option><option>Сокращенный рабочий день (с 9 до 12 без обеда)</option><option selected="true">Выходной день</option></select></td><td><i class="fa fa-plus" aria-hidden="true"></i></td></tr></table></div><p class="nvx-suo-check"><input type="checkbox" name="">Применять этот шаблон для создания расписания по-умолчанию</p><div class="nvx-suo-actions"><a class="nvx-suo-button" id="save-place"><i class="fa fa-check" aria-hidden="true"></i>Сохранить</a><a class="nvx-suo-button-minor" id="cancel-place"><i class="fa fa-ban" aria-hidden="true"></i>Отмена</a><a class="nvx-suo-admin-link" id="my-places">Назад к списку организаций</a></div>';

  $(".nvx-suo-admin").html(content);

  $("#my-places").click(SuoAdminModule.myPlaces);
  //TODO other elements
};

SuoAdminModule.editDay = function() {
  console.log("--> editDay()");

  var content = '<h1>Изменение расписания на день</h1><p>Наименование дня:<span>*</span><input type="text" value="Рабочий день с 9:00 до 18:00"></p><div class="nvx-suo-block"><p>Рабочее время:<span>*</span></p><p>Начало рабочего дня <input type="text" name="start"> Окончание рабочего дня <input type="text" name="end"></p></div><div class="nvx-suo-block"><p><input type="checkbox" name="break">Перерыв на обед</p><p>Начало перерыва <input type="text" name="start"> Окончание перерыва <input type="text" name="end"></p></div><div class="nvx-suo-block"><p><input type="checkbox" name="">Наследовать от шаблона</p><p>Продолжительность приема одного посетителя (в мин.) <input type="number" name="time" /></p></div><div class="nvx-suo-actions"><a class="nvx-suo-button" href="#">Сохранить</a><a class="nvx-suo-button-minor" href="#">Отмена</a><a class="nvx-suo-admin-link" id="my-places">Назад к списку организаций</a></div>';
  $(".nvx-suo-admin").html(content);

  $("#my-places").click(SuoAdminModule.myPlaces);

};

SuoAdminModule.placeSettings = function() {
  console.log("--> placeSettings()");

  var content = '<h1>Администрирование и настройка</h1><h2>Расширенные настройки организации "МФЦ г.Владимир (Октябрьский пр-т)"</h2><label>Тип организации</label><select><option>МФЦ</option></select><label>Email для рассылки уведомлений</label><input type="text" name="" value="inf@mfc.ru"><label>Официальный представитель организации</label><input type="text" name="" value="Иванов Иван Иванович"><label>Сайт организации</label><input type="text" name="" value="mfc.ru"><div class="nvx-suo-actions"><a class="nvx-suo-button" href="#"><i class="fa fa-check" aria-hidden="true"></i>Сохранить</a><a class="nvx-suo-button-minor"><i class="fa fa-ban" aria-hidden="true"></i>Отмена</a><a class="nvx-suo-admin-link" id="my-places">Назад к списку организаций</a></div>';
  $(".nvx-suo-admin").html(content);

  $("#my-places").click(SuoAdminModule.myPlaces);

};

SuoAdminModule.mySchedules = function() {
  console.log("--> mySchedules()");

  var content = '<h1>Настройки расписания</h1><h2>Настройки расписания на день</h2><table cellspacing="0" cellpadding="0"><tbody><tr><td>Рабочий день (с 9:00 до 18:00 с перерывом на обед)</td><td><div class="dropdown"><i class="fa fa-ellipsis-v dropbtn" aria-hidden="true"></i><div class="dropdown-content"><a href="#">Изменить</a><a href="#">Удалить</a></div></div></td></tr><tr><td>Сокращенный рабочий день (с 9:00 до 12:00 без обеда)</td><td><div class="dropdown"><i class="fa fa-ellipsis-v dropbtn" aria-hidden="true"></i><div class="dropdown-content"><a href="#">Изменить</a><a href="#">Удалить</a></div></div></td></tr><tr><td>Выходной день</td><td><div class="dropdown"><i class="fa fa-ellipsis-v dropbtn" aria-hidden="true"></i><div class="dropdown-content"><a href="#">Изменить</a><a href="#">Удалить</a></div></div></td></tr></tbody></table><div class="nvx-suo-actions"><a class="nvx-suo-button" href="#">Добавить</a><a class="nvx-suo-admin-link" id="my-places">Назад к списку организаций</a></div>';
  $(".nvx-suo-admin").html(content);
  $("#my-places").click(SuoAdminModule.myPlaces);

};

SuoAdminModule.myTemplates = function() {
  console.log("--> myTemplates()");

  var content = '<h1>Администрирование и настройка</h1><h2>Шаблоны расписания организации "МФЦ г.Владимир (Октябрьский пр-т)"</h2><table cellspacing="0" cellpadding="0"><tbody><tr><td><label><input type="radio" name="rd">Обычное расписание организации</label></td><td><div class="dropdown"><i class="fa fa-ellipsis-v dropbtn" aria-hidden="true"></i><div class="dropdown-content"><a href="#">Изменить</a><a href="#">Расписание</a><a href="#">Удалить</a></div></div></td></tr><tr><td><label><input type="radio" name="rd">Расписание для Госуслуг слабослышащих граждан</label></td><td><div class="dropdown"><i class="fa fa-ellipsis-v dropbtn" aria-hidden="true"></i><div class="dropdown-content"><a href="#">Изменить</a><a href="#">Расписание</a><a href="#">Удалить</a></div></div></td></tr><tr><td><label><input type="radio" name="rd">Расписание для услуг Росжелдора</label></td><td><div class="dropdown"><i class="fa fa-ellipsis-v dropbtn" aria-hidden="true"></i><div class="dropdown-content"><a href="#">Изменить</a><a href="#">Расписание</a><a href="#">Удалить</a></div></div></td></tr></tbody></table><div class="nvx-suo-actions"><a class="nvx-suo-button" id="new-template"><i class="fa fa-plus-circle" aria-hidden="true"></i>Добавить</a><a class="nvx-suo-button-minor" id="schedule-settings"><i class="fa fa-cog" aria-hidden="true"></i>Настройки расписания</a><a class="nvx-suo-admin-link" id="my-places">Назад к списку организаций</a></div>';
  $(".nvx-suo-admin").html(content);

  $("#new-template").click(SuoAdminModule.editTemplate);
  $("#schedule-settings").click(SuoAdminModule.mySchedules);
  $("#my-places").click(SuoAdminModule.myPlaces);

};

SuoAdminModule.adminGetPlaces = function() {
  console.log("--> adminGetPlaces()");

  $.ajax({
    headers: { "user_token" : SuoAdminModule.userToken, "portal_id" : "9b1bae07-3852-412f-b26f-c4b8b3bad5f1" },
    url: SuoAdminModule.host + "v1/admin/place/getplaces",
    dataType: 'json',
  })
  .done(function (data, status, jqxhr) {
    console.log("adminGetPlaces done!");
    console.log(data);

  })
  .fail(function() {
    alert("Admin: Ошибка получения списка организаций!");
  });
};

SuoAdminModule.updatePlace = function() {
  console.log("--> updatePlace()");

};



$(document).ready(function() {
  SuoAdminModule.myPlaces();


});
